{"mappings":"AACA,IAAIA,EAASC,SAASC,cAAc,SAChCC,EAAUF,SAASC,cAAc,wBACjCE,EAASH,SAASC,cAAc,uBAChCG,EAAWJ,SAASC,cAAc,yBAItCF,EAAOM,iBAAiB,SAMxB,WACEC,QAAQC,IAAI,SACVC,EAAUC,aAAaC,QAVT,uBAWdC,EAASC,KAAKC,MAAML,GACpBF,QAAQC,IAAII,GACZF,aAAaK,QAbC,sBAakBF,KAAKG,UAAU,CACpCC,MAAQd,EAAQe,MAChBC,KAAOf,EAAOc,MACdE,OAASf,EAASa,Q,IAbjClB,EAAOM,iBAAiB,UAiBxB,SAAkBe,GAChBA,EAAEC,iBAEFb,EAAUC,aAAaC,QAvBP,uBAwBdC,EAASC,KAAKC,MAAML,GAEpB,IAAIQ,EAAQM,OAAOpB,EAAQe,OACvBC,EAAOI,OAAOnB,EAAOc,OACrBE,EAASG,OAAOlB,EAASa,OAE7B,IAAK,IAAIM,EAAI,EAAGA,GAAKJ,EAAQI,GAAK,EAAE,CAE9BC,EAAcD,EADIP,EAAQE,GAAQK,EAAI,IACVE,KAAKC,GAAWC,MAAMC,E,KA3B5D,IAAIpB,EAAUC,aAAaC,QALT,uBAMdC,EAASC,KAAKC,MAAML,GA+BxB,SAASgB,EAAcK,EAAUb,GAC/B,MAAMc,EAAgBC,KAAKC,SAAW,GAEtC,OAAO,IAAIC,SAAQ,CAACC,EAASC,KAC3BC,YAAW,KACLN,EACFI,EAAQ,C,SAAEL,E,MAAUb,IAEpBmB,EAAO,C,SAAEN,E,MAAUb,GAAQ,GAE5BA,EAAM,G,CAIb,SAASU,GAAUG,SAAEA,EAAQb,MAAEA,IAC9BV,QAAQC,IAAI,uBAAqBsB,QAAiBb,M,CAGnD,SAASY,GAAQC,SAAEA,EAAQb,MAAEA,IAC3BV,QAAQC,IAAI,sBAAoBsB,QAAiBb,M","sources":["src/js/03-promises.js"],"sourcesContent":["\nlet formEl = document.querySelector('.form')\nlet delayEl = document.querySelector('.form [name=\"delay\"]');\nlet stepEl = document.querySelector('.form [name=\"step\"]');\nlet amountEl = document.querySelector('.form [name=\"amount\"]');\n\nconst formToKey = \"feedback-form-state\";\n\nformEl.addEventListener('input', onInput);\nformEl.addEventListener('submit', onSubmit);\n\nlet inLocal = localStorage.getItem(formToKey);\nlet parsed = JSON.parse(inLocal);\n\nfunction onInput(){\n  console.log(\"input\");\n    inLocal = localStorage.getItem(formToKey);\n    parsed = JSON.parse(inLocal);\n    console.log(parsed);\n    localStorage.setItem(formToKey, JSON.stringify({\n               delay : delayEl.value,\n               step : stepEl.value,\n               amount : amountEl.value,\n           }));\n}\n\nfunction onSubmit(e){\n  e.preventDefault();\n  // console.log(\"submit\");\n  inLocal = localStorage.getItem(formToKey);\n    parsed = JSON.parse(inLocal);\n    // console.log(`{delay:${delayEl.value}, step:${stepEl.value}, amount: ${amountEl.value}}`);\n    let delay = Number(delayEl.value);\n    let step = Number(stepEl.value);\n    let amount = Number(amountEl.value);\n    \n    for (let i = 1; i <= amount; i += 1){\n          const delayStep = delay + step * (i - 1);\n          createPromise(i, delayStep).then(onSuccess).catch(onError)\n        };\n      };\n\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n\n  return new Promise((fulfill, reject) => {\n    setTimeout(() => {\n      if (shouldResolve) {\n        fulfill({ position, delay })\n      } else {\n        reject({ position, delay })\n      }\n    }, delay);\n  });\n};\n\nfunction onSuccess({ position, delay }) { \n console.log(`✅ Fulfilled promise ${position} in ${delay}ms`);\n};\n\nfunction onError({ position, delay }) {\n  console.log(`❌ Rejected promise ${position} in ${delay}ms`);\n};\n\n// createPromise(2, 1500)\n//   .then(({ position, delay }) => {\n//     console.log(`✅ Fulfilled promise ${position} in ${delay}ms`);\n//   })\n//   .catch(({ position, delay }) => {\n//     console.log(`❌ Rejected promise ${position} in ${delay}ms`);\n//   });\n\n\n\n\n"],"names":["$47d4ff9957288465$var$formEl","document","querySelector","$47d4ff9957288465$var$delayEl","$47d4ff9957288465$var$stepEl","$47d4ff9957288465$var$amountEl","addEventListener","console","log","$47d4ff9957288465$var$inLocal","localStorage","getItem","$47d4ff9957288465$var$parsed","JSON","parse","setItem","stringify","delay","value","step","amount","e","preventDefault","Number","i","$47d4ff9957288465$var$createPromise","then","$47d4ff9957288465$var$onSuccess","catch","$47d4ff9957288465$var$onError","position","shouldResolve","Math","random","Promise","fulfill","reject","setTimeout"],"version":3,"file":"03-promises.f66e22a2.js.map"}