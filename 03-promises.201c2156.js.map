{"mappings":"YACA,IAAIA,EAASC,SAASC,cAAc,SAChCC,EAAUF,SAASC,cAAc,wBACjCE,EAASH,SAASC,cAAc,uBAChCG,EAAWJ,SAASC,cAAc,yBAEhCI,EAAY,sBAElBN,EAAOO,iBAAiB,SAMxB,WACEC,QAAQC,IAAI,SACVC,EAAUC,aAAaC,QAAQN,GAC/BO,EAASC,KAAKC,MAAML,GACpBF,QAAQC,IAAII,GACZF,aAAaK,QAAQV,EAAWQ,KAAKG,UAAU,CACpCC,MAAQf,EAAQgB,MAChBC,KAAOhB,EAAOe,MACdE,OAAShB,EAASc,Q,IAbjCnB,EAAOO,iBAAiB,UAiBxB,SAAkBe,GAChBA,EAAEC,iBAEFb,EAAUC,aAAaC,QAAQN,GAC7BO,EAASC,KAAKC,MAAML,GAMpB,IAJA,IAAIQ,EAAQM,OAAOrB,EAAQgB,OACvBC,EAAOI,OAAOpB,EAAOe,OACrBE,EAASG,OAAOnB,EAASc,OAEpBM,EAAI,EAAGA,GAAKJ,EAAQI,GAAK,EAAE,CAE9BC,EAAcD,EADIP,EAAQE,GAAQK,EAAI,IACVE,KAAKC,GAAWC,MAAMC,E,KA3B5D,IAAIpB,EAAUC,aAAaC,QAAQN,GAC/BO,EAASC,KAAKC,MAAML,GA+BxB,SAASgB,EAAcK,EAAUb,GAC/B,IAAMc,EAAgBC,KAAKC,SAAW,GAEtC,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACLN,EACFI,EAAQ,CAAEL,WAAUb,UAEpBmB,EAAO,CAAEN,WAAUb,S,GAEpBA,E,IAIP,SAASU,EAAUW,G,IAAER,EAAFQ,EAAER,SAAUb,EAAZqB,EAAYrB,MAC9BV,QAAQC,IAAI,uBAAwC+B,OAAfT,EAAS,QAAYS,OAANtB,EAAM,M,CAG3D,SAASY,EAAQS,G,IAAER,EAAFQ,EAAER,SAAUb,EAAZqB,EAAYrB,MAC3BV,QAAQC,IAAI,sBAAuC+B,OAAfT,EAAS,QAAYS,OAANtB,EAAM,M","sources":["src/js/03-promises.js"],"sourcesContent":["\nlet formEl = document.querySelector('.form')\nlet delayEl = document.querySelector('.form [name=\"delay\"]');\nlet stepEl = document.querySelector('.form [name=\"step\"]');\nlet amountEl = document.querySelector('.form [name=\"amount\"]');\n\nconst formToKey = \"feedback-form-state\";\n\nformEl.addEventListener('input', onInput);\nformEl.addEventListener('submit', onSubmit);\n\nlet inLocal = localStorage.getItem(formToKey);\nlet parsed = JSON.parse(inLocal);\n\nfunction onInput(){\n  console.log(\"input\");\n    inLocal = localStorage.getItem(formToKey);\n    parsed = JSON.parse(inLocal);\n    console.log(parsed);\n    localStorage.setItem(formToKey, JSON.stringify({\n               delay : delayEl.value,\n               step : stepEl.value,\n               amount : amountEl.value,\n           }));\n}\n\nfunction onSubmit(e){\n  e.preventDefault();\n  // console.log(\"submit\");\n  inLocal = localStorage.getItem(formToKey);\n    parsed = JSON.parse(inLocal);\n    // console.log(`{delay:${delayEl.value}, step:${stepEl.value}, amount: ${amountEl.value}}`);\n    let delay = Number(delayEl.value)\n    let step = Number(stepEl.value)\n    let amount = Number(amountEl.value);\n    \n    for (let i = 1; i <= amount; i += 1){\n          const delayStep = delay + step * (i - 1);\n          createPromise(i, delayStep).then(onSuccess).catch(onError)\n        };\n      };\n\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n\n  return new Promise((fulfill, reject) => {\n    setTimeout(() => {\n      if (shouldResolve) {\n        fulfill({ position, delay })\n      } else {\n        reject({ position, delay })\n      }\n    }, delay);\n  });\n};\n\nfunction onSuccess({ position, delay }) { \n console.log(`✅ Fulfilled promise ${position} in ${delay}ms`);\n};\n\nfunction onError({ position, delay }) {\n  console.log(`❌ Rejected promise ${position} in ${delay}ms`);\n};\n\n// createPromise(2, 1500)\n//   .then(({ position, delay }) => {\n//     console.log(`✅ Fulfilled promise ${position} in ${delay}ms`);\n//   })\n//   .catch(({ position, delay }) => {\n//     console.log(`❌ Rejected promise ${position} in ${delay}ms`);\n//   });\n\n\n\n\n"],"names":["$ce04d3a99e08e73b$var$formEl","document","querySelector","$ce04d3a99e08e73b$var$delayEl","$ce04d3a99e08e73b$var$stepEl","$ce04d3a99e08e73b$var$amountEl","$ce04d3a99e08e73b$var$formToKey","addEventListener","console","log","$ce04d3a99e08e73b$var$inLocal","localStorage","getItem","$ce04d3a99e08e73b$var$parsed","JSON","parse","setItem","stringify","delay","value","step","amount","e","preventDefault","Number","i","$ce04d3a99e08e73b$var$createPromise","then","$ce04d3a99e08e73b$var$onSuccess","catch","$ce04d3a99e08e73b$var$onError","position","shouldResolve","Math","random","Promise","fulfill","reject","setTimeout","param","concat"],"version":3,"file":"03-promises.201c2156.js.map"}